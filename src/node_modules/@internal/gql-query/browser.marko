import { readyLookup } from "@internal/client";

$ const id = component.elId("@gqlc");
$ if (readyLookup[id]) {
  component.ready = true;
  readyLookup[id]();
}
<div key="root" no-update-if(!component.ready)>
  $ component.ready = true;
  <gql-query-client
    key="gqlc"
    query=input.query
    name=input.name
    variables=input.variables
    requestPolicy=input.requestPolicy
    timeout=input.timeout
    then=input.then
    placeholder=input.placeholder
  />
</div>
$ if (!component.ready) {
  readyLookup[id] = () => {
    delete readyLookup[id];
    component.ready = true;
    component.forceUpdate();
  };
}
