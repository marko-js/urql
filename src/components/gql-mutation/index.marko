import { createClient } from "../../client";
class {
  onCreate() {
    this.state = { results: {}, fetching: false };
  }
}
$ const { renderBody, mutation, requestPolicy } = input;

<${renderBody}(
  (variables, options) => {
    const { client } = window.$$GQL || (window.$$GQL = createClient({}));
    component.setState("fetching", true);
    return client
      .mutation(mutation, variables, { requestPolicy, ...options })
      .toPromise()
      .then((results) => {
        component.setState({
          results,
          fetching: false,
        });
        return results;
      });
  },
  { ...state.results, fetching: state.fetching },
)/>
